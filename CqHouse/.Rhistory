plot(cars)
plot(cars)
plot(cars)
read.csv("cq.csv",sep = ",")
cq <- read.csv("cq.csv",sep = ",")
View(cq)
View(cq)
head(cq)
cq <- read.csv("cq.csv",sep = ",", header = c('name','type','size'))
cq <- read.csv("cq.csv",sep = ",", header = 'F')
cq <- read.csv("cq.csv",sep = ",", header = FALSE)
View(cq)
head(cq)
View(cq)
cq <- read.csv("cq2.csv",sep = ",", header = FALSE)
head(cq)
View(cq)
cq$V11
names(cq) <- c('名字','户型','面积','朝向','装修','电梯','楼层','区域','价格(万元)','单价(平方米)')
View(cq)
cq <- read.csv("cq2.csv",sep = ",", header = FALSE)
names(cq) <- c('名字','户型','面积','朝向','装修','电梯','楼层','区域','价格(万元)','单价(平方米)')
cq <- read.csv("cq2.csv",sep = ",", header = FALSE)
names(cq) <- c('名字','户型','面积','朝向','装修','电梯','楼层','区域','价格(万元)','单价(平方米)')
cq <- read.csv("cq2.csv",sep = ",", header = FALSE)
names(cq) <- c('名字','户型','面积','朝向','装修','电梯','楼层','区域','价格(万元)','单价(平方米)')
head(cq)
head(cq)
subset.data.frame(cq,select = -NULL)
subset.data.frame(cq,select = -)
cq[, -11]
head(cq[, -11])
cq <- read.csv("cq2.csv",sep = ",", header = FALSE)
cq <- cq[, -11]
names(cq) <- c('名字','户型','面积','朝向','装修','电梯','楼层','区域','价格(万元)','单价(平方米)')
cq <- read.csv("cq2.csv",sep = ",", header = FALSE)
cq <- cq[, -11]
names(cq) <- c('名字','户型','面积','朝向','装修','电梯','楼层','区域','价格(万元)','单价(平方米)')
head(cq)
data <-cq[which('单价(平方米)'!=NA)]
View(data)
data <-cq[which('单价(平方米)'!= NA)]
data <-cq[which('单价(平方米)'!= NA),]
View(data)
data <-na.omit(cq)
View(data)
data[which(data$户型 != 联排别墅)]
data[which(data$户型 != '联排别墅')]
cq2data <-na.omit(cq)
cq2data[which(cq2data$户型 != '联排别墅')]
cq2data[which(cq2data$户型 != '联排别墅'),]
cq2data[which(cq2data$户型 != '联排别墅'),]
head(cq2data)
View(cq2data)
cq2 <- cq2data[which(cq2data$户型 != '联排别墅'),]
cq2data <- cq2data[which(cq2data$户型 != '联排别墅'),]
cq2data <- cq2data[which(cq2data$户型 != '..别墅'),]
cq2data <- cq2data[which(cq2data$户型 != '..别墅'),]
grep("..别墅",cq$户型)
grep("NA",cq$`单价(平方米)`)
grep("NA",cq$单价(平方米))
grep(NA,cq$单价(平方米))
grep(NA,cq$`单价(平方米)`)
bieshuIndex  <- grep("..别墅",cq$户型)
subset(cq2data, bieshuIndex)
cq2data[-bieshuIndex]
cq2data <- cq2data[-bieshuIndex]
View(cq2data)
cq2data <-na.omit(cq)
bieshuIndex  <- grep("..别墅",cq2data$户型)
cq2data <- cq2data[-bieshuIndex]
View(data)
data[bieshuIndex,]
cq2data <- cq2data[-bieshuIndex]
View(cq2data)
cq2data[406,]
rank(-bieshuIndex)
bieshuIndex
bieshuIndex[1:2]
bieshuIndex[::-1]
bieshuIndex[:-1]
bieshuIndex[:,-1]
bieshuIndex[-1]
bieshuIndex  <- grep("..别墅",cq2data$户型)
rank(c(23,34,11,23,41,12))
cq2data <- cq2data[-bieshuIndex,]
library(ggplot2)
type_freq <- data.frame(table(cq2data$户型))
View(type_freq)
View(cq2data)
table(cq2$户型)
table(cq2data$户型)
cq <- read.csv("cq2.csv",sep = ",", header = FALSE)
cq <- cq[, -11]
names(cq) <- c('名字','户型','面积','朝向','装修','电梯','楼层','区域','价格(万元)','单价(平方米)')
cq2data <-na.omit(cq)
head(cq2data)
bieshuIndex  <- grep("..别墅",cq2data$户型)
cq2data <- cq2data[-bieshuIndex,]
library(ggplot2)
type_freq <- data.frame(table(cq2data$户型))
View(type_freq)
grep("..别墅",cq2data$户型)
type_freq
grep("..别墅",cq2data$户型)
type_freq <- data.frame(table(cq$户型))
type_freq <- data.frame(table(cq$户型))
library(ggplot2)
type_p <- ggplot(data = type_freq, mapping = aes(x = reorder(Var1, -Freq),y = Freq)) + geom_bar(stat = 'identity', fill = 'steelblue') + theme(axis.text.x  = element_text(angle = 30, vjust = 0.5)) + xlab('户型') + ylab('套数')
type_p
type_p
type_p
type_freq
cq <- read.csv("cq2.csv",sep = ",", header = FALSE)
cq <- cq[, -11]
names(cq) <- c('名字','户型','面积','朝向','装修','电梯','楼层','区域','价格(万元)','单价(平方米)')
head(cq)
# delete the row with NA
cq2data <-na.omit(cq)
# delete 别墅 data
bieshuIndex  <- grep("..别墅",cq2data$户型)
cq2data <- cq2data[-bieshuIndex,]
# load library
library(ggplot2)
# show the different type houses' frquency
type_freq <- data.frame(table(cq$户型))
type_p <- ggplot(data = type_freq, mapping = aes(x = reorder(Var1, -Freq),y = Freq)) + geom_bar(stat = 'identity', fill = 'steelblue') + theme(axis.text.x  = element_text(angle = 30, vjust = 0.5)) + xlab('户型') + ylab('套数')
type_p
View(type_freq)
order(type_freq$Freq)
reorder(type_freq$Freq)
sort(type_freq$Freq)
# load library
library(ggplot2)
# show the different type houses' frquency
type_freq <- data.frame(table(cq2data$户型))
type_p <- ggplot(data = type_freq, mapping = aes(x = reorder(Var1, -Freq),y = Freq)) + geom_bar(stat = 'identity', fill = 'steelblue') + theme(axis.text.x  = element_text(angle = 30, vjust = 0.5)) + xlab('户型') + ylab('套数')
type_p
sort(type_freq$Freq)
sort(type_freq)
sort(type_freq, order(type_freq$Freq))
sort(type_freq, order(type_freq$Freq, decreasing = decreasing))
sort(type_freq, order(type_freq$Freq, decreasing = decreasing))
type <- c('3室2厅','4室2厅','2室2厅','1室1厅','2室1厅','其他')
cq2data$type.new <- ifelse(house$户型 %in% type, house$户型,'其他')
type <- c('3室2厅','4室2厅','2室2厅','1室1厅','2室1厅','其他')
cq2data$type.new <- ifelse(cq2data$户型 %in% type, house$户型,'其他')
type <- c('3室2厅','4室2厅','2室2厅','1室1厅','2室1厅','其他')
cq2data$type.new <- ifelse(cq2data$户型 %in% type, cq2data$户型,'其他')
data.frame(table(cq2data$type.new))
type <- c('3室2厅','4室2厅','2室2厅','1室1厅','2室1厅')
cq2data$type.new <- ifelse(cq2data$户型 %in% type, cq2data$户型,'其他')
data.frame(table(cq2data$type.new))
type <- c('3室2厅','4室2厅','2室2厅','1室1厅','2室1厅')
cq2data$type.new <- ifelse(cq2data$户型 %in% type, cq2data$户型,'其他')
type_freq <- data.frame(table(cq2data$type.new))
# 绘图
type_p <- ggplot(data = type_freq, mapping = aes(x = reorder(Var1, -Freq),y = Freq)) + geom_bar(stat = 'identity', fill = 'steelblue') + theme(axis.text.x  = element_text(angle = 30, vjust = 0.5)) + xlab('户型') + ylab('套数')
type_p
?"%in%"
'3室2厅' %in% type
type <- c('3室2厅','4室2厅','2室2厅','1室1厅','2室1厅')
# 重新划分户型
cq2data$type.new <- ifelse(cq2data$户型 %in% type, cq2data$户型, '其他')
# show the different type houses' frquency
type_freq <- data.frame(table(cq2data$type.new))
# 绘图
type_p <- ggplot(data = type_freq, mapping = aes(x = reorder(Var1, -Freq),y = Freq)) + geom_bar(stat = 'identity', fill = 'steelblue') + theme(axis.text.x  = element_text(angle = 30, vjust = 0.5)) + xlab('户型') + ylab('套数')
type_p
type <- c('3室2厅','4室2厅','2室2厅','1室1厅','2室1厅')
# 重新划分户型(三目运算符)
cq2data$type.new <- ifelse(cq2data$户型 %in% type, cq2data$户型, '其他')
cq2data[,-11]
type <- c('3室2厅','4室2厅','2室2厅','1室1厅','2室1厅')
# 重新划分户型(三目运算符)
cq2data$type.new <- ifelse(cq2data$户型 %in% type, cq2data$户型, '其他')
View(cq2data)
type_freq <- data.frame(table(cq2data$户型))
View(type_freq)
type_tag <- c('3室2厅','4室2厅','2室2厅','1室1厅','2室1厅','1室0厅')
# 重新划分户型(三目运算符)
cq2data$type.new <- ifelse(cq2data$户型 %in% type_tag, cq2data$户型, '其他')
View(cq2data)
cq2data$户型
cq2data$type.n <- ifelse(cq2data$户型 %in% type_tag, cq2data$户型, '其他')
if(cq2data$户型 %in% type_tag){
type.n = cq2data$户型
}else{
type.n = '其他'
}
?in
?%in%
? "%in%"
? "%not in%"
? "%notin%"
1:10 %in% c(1,3,5,9)]
0 %in% c(1,3,5,9)]
0 %in% c(1,3,5,9)
cq2data$type.n <- cq2data$户型
View(cq2data)
cq2data$type.n <- ifelse(cq2data$type.n %in% type_tag, cq2data$type.n, '其他')
View(cq2data)
cq2data$type.n <- cq2data$户型
View(cq2data)
grep('其他',cq2data$type.new)
cq2data$type.n[grep('其他',cq2data$type.new)] <- '其他'
cq2data$type.n[grep('其他',cq2data$type.new),] <- '其他'
View(cq2data)
cq2data$type.n[,grep('其他',cq2data$type.new)] <- '其他'
type_tag <- c('3室2厅','4室2厅','2室2厅','1室1厅','2室1厅','1室0厅')
# 重新划分户型(三目运算符) 这里有点问题,先曲线酒国了
cq2data$type.n <- ifelse(cq2data$户型 %in% type_tag, cq2data$户型, '其他')
cq2data$type.new <- cq2data$户型
otherIndex <- grep('其他',cq2data$type.n)
cq2data$type.new[otherIndex] <- '其他'
View(type_freq)
View(cq2data)
cq2data$type.new[otherIndex,] <- '其他'
cq2data$type.new
cq2data$type.new[otherIndex,] <- NA
cq2data$type.new[,otherIndex] <- NA
cq2data$type.new[otherIndex,1] <- NA
cq2data$type.new[otherIndex,]
cq2data$type.new(otherIndex)
cq2data[otherIndex,]$type.new<'其他'
cq2data[otherIndex,]$type.new<-'其他'
cq2data[otherIndex,]
cq2data$户型 %in% type_tag
ifelse(cq2data$户型 %in% type_tag, cq2data$户型, 'other')
ifelse(cq2data$户型 %in% type_tag, cq2data$type.n <-cq2data$户型, 'other')
View(cq2data)
View(type_freq)
? ifelse
ifelse(cq2data$户型 %in% type_tag, cq2data$户型, 'other')
View(type_freq)
rm(type_freq)
ifelse(cq2data$户型 %in% type_tag, cq2data$户型, 'other')
type_freq <- data.frame(table(cq2data$户型))
View(type_freq)
rm(type.n)
type_tag <- c('3室2厅','4室2厅','2室2厅','1室1厅','2室1厅','1室0厅')
# 重新划分户型(三目运算符) 这里有点问题,先曲线酒国了
cq2data$type.n <- ifelse(cq2data$户型 %in% type_tag, cq2data$户型, '其他')
cq2data$type.new <- cq2data$户型
otherIndex <- grep('其他',cq2data$type.n)
cq2data$type.new[otherIndex] <- '其他'
cq2data[whcih == NA] <- '其他'
cq2data[which(cq2data==NA) ] <- '其他'
View(cq2data)
View(type_freq)
View(cq2data)
cq2data[which(cq2data$type.new==NA) ] <- '其他'
View(cq2data)
which(cq2data$type.new==NA)
whcih(cq2data$户型 %in% type_tag)
which(cq2data$户型 %in% type_tag)
which(!(cq2data$户型 %in% type_tag))
cq2data$type.new[which(!(cq2data$户型 %in% type_tag))] <- 'other'
View(cq2data)
View(cq2data)
d<-as.data.frame(cq2data)
View(d)
d$type.new[which(!(d$户型 %in% type_tag))] <- 'other'
d$type.new[which(!(d$户型 %in% type_tag)),] <- 'other'
d$type.new[otherIndex,] <- 'other'
d[which(d == NA)]
d[which(d$type.new == NA)]
d[which(d$type.new == NA),]
d[,which(d$type.new == NA)]
d[is.na(d)] <- 'other'
View(cq2data)
View(d)
